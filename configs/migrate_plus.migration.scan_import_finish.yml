uuid: c4c16623-5a62-453b-9f97-b469decf8fa8
langcode: en
status: true
dependencies: {  }
id: scan_import_finish
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags:
  - images
migration_group: archive_mu
label: 'Add "Original file" term to media'
source:
  plugin: csv
  path: /var/www/html/drupal/web/sites/default/files/scan_upload/import.csv
  delimiter: ;
  enclosure: '"'
  header_offset: 0
  ids:
    - title
  fields:
    -
      name: title
      label: Title
    -
      name: page_name
      label: 'Page name'
    -
      name: page_number
      label: 'Page number'
    -
      name: page_order
      label: 'Page order'
    -
      name: book
      label: 'Book name'
    -
      name: parent
      label: 'Parent ID'
  constants:
    SCAN_FILE_EXTENSION: .tif
    MEDIA_USE: 'Original file'
process:
  destination_filename:
    -
      plugin: concat
      source:
        - title
        - constants/SCAN_FILE_EXTENSION
    -
      plugin: skip_on_empty
      method: row
      message: 'Cannot import empty filename.'
  destination_path:
    -
      plugin: concat
      source:
        - '@destination_filename'
  name: '@destination_filename'
  field_media_use:
    -
      plugin: concat
      source:
        - constants/MEDIA_USE
    -
      plugin: entity_lookup
      value_key: name
      ignore_case: true
      entity_type: taxonomy_term
destination:
  plugin: 'entity:media'
  default_bundle: file
migration_dependencies:
  required:
    - file_to_media
